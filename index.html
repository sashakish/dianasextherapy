<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sex and Relationship Therapy and Coaching | Diana Urman, PhD, LCSW</title>
    <meta name="description" content="Diana Urman offers sex therapy, relationship counseling, and ketamine-assisted therapy in San Francisco, Calistoga, and Santa Barbara. PhD in Human Sexuality, LCSW #26883. Free 15-minute consultation.">
    <meta name="keywords" content="sex therapy, relationship therapy, couples counseling, sex therapist San Francisco, sex therapist Napa Valley, sex therapist Santa Barbara, ketamine assisted therapy, erectile dysfunction, desire, intimacy, LCSW, Diana Urman">
    <link rel="canonical" href="https://sashakish.github.io/dianasextherapy/">

    <!-- Open Graph -->
    <meta property="og:title" content="Sex and Relationship Therapy and Coaching | Diana Urman, PhD, LCSW">
    <meta property="og:description" content="A safe, compassionate space to explore your sexuality, deepen connection, and heal. Serving San Francisco, Calistoga, and Santa Barbara.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sashakish.github.io/dianasextherapy/">
    <meta property="og:image" content="https://sashakish.github.io/dianasextherapy/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Sex and Relationship Therapy | Diana Urman, PhD, LCSW">
    <meta name="twitter:description" content="Sex therapy, relationship counseling, and ketamine-assisted therapy. Free 15-minute consultation.">
    <meta name="twitter:image" content="https://sashakish.github.io/dianasextherapy/og-image.jpg">

    <!-- Mobile browser -->
    <meta name="theme-color" content="#3D2B3D">
    <link rel="apple-touch-icon" href="favicon.png">

    <link rel="shortcut icon" type="image/png" href="favicon.png">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9LNSWDT1D"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-Y9LNSWDT1D');
    </script>

    <!-- Structured Data for Local Business + FAQ -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ProfessionalService",
      "name": "Diana Urman, PhD, LCSW - Sex and Relationship Therapy",
      "description": "Sex therapy, relationship counseling, couples therapy, and ketamine-assisted therapy.",
      "url": "https://sashakish.github.io/dianasextherapy/",
      "telephone": "+14157295173",
      "email": "diana@dianaurman.com",
      "priceRange": "$$",
      "image": "https://sashakish.github.io/dianasextherapy/logo.png",
      "address": [
        {
          "@type": "PostalAddress",
          "streetAddress": "4112 24th Street",
          "addressLocality": "San Francisco",
          "addressRegion": "CA",
          "postalCode": "94114",
          "addressCountry": "US"
        },
        {
          "@type": "PostalAddress",
          "addressLocality": "Calistoga",
          "addressRegion": "CA",
          "postalCode": "94515",
          "addressCountry": "US"
        },
        {
          "@type": "PostalAddress",
          "addressLocality": "Santa Barbara",
          "addressRegion": "CA",
          "postalCode": "93067",
          "addressCountry": "US"
        }
      ],
      "areaServed": ["San Francisco", "Bay Area", "Noe Valley", "Calistoga", "Napa Valley", "Santa Barbara", "Montecito", "Summerland", "Carpinteria"],
      "hasCredential": [
        {"@type": "EducationalOccupationalCredential", "credentialCategory": "PhD in Human Sexuality"},
        {"@type": "EducationalOccupationalCredential", "credentialCategory": "MSW in Clinical Social Work"},
        {"@type": "EducationalOccupationalCredential", "credentialCategory": "LCSW #26883"},
        {"@type": "EducationalOccupationalCredential", "credentialCategory": "Certified Clinical Sexologist"}
      ],
      "memberOf": {"@type": "Organization", "name": "AASECT"},
      "knowsAbout": ["Sex Therapy", "Relationship Therapy", "Couples Counseling", "Ketamine Assisted Therapy", "Erectile Dysfunction", "Sexual Trauma", "Desire Discrepancy", "Attachment Theory", "Somatica Method"]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {"@type": "Question", "name": "What is sex therapy?", "acceptedAnswer": {"@type": "Answer", "text": "Sex therapy is a form of talk therapy where the therapist evaluates your concerns and assesses your relevant history. One of the purposes is to increase your confidence in and out of the bedroom. The most frequent therapeutic outcome is the relief that comes with being able to freely share sexual feelings, thoughts, and fantasies."}},
        {"@type": "Question", "name": "Do you accept insurance?", "acceptedAnswer": {"@type": "Answer", "text": "While I currently do not accept insurance, your insurance may reimburse you for all or part of our sessions. I'm happy to provide itemized receipts to submit to your insurance company."}},
        {"@type": "Question", "name": "What methodology do you use?", "acceptedAnswer": {"@type": "Answer", "text": "I use an integrative approach combining sex therapy and relationship therapy, focusing on personal development and increasing your capacity for intimacy and passion. This methodology uses spontaneous sexual behavior as a window into yourself and your partner, emphasizing personal growth over conventional communication-focused approaches."}},
        {"@type": "Question", "name": "Can I start therapy alone and include my partner later?", "acceptedAnswer": {"@type": "Answer", "text": "Absolutely. Many clients start therapy as a solo experience and choose to include their partners later, once they've achieved certain goals on their own."}},
        {"@type": "Question", "name": "Are there homework assignments?", "acceptedAnswer": {"@type": "Answer", "text": "Not always, but frequently I will ask you to read certain books and complete exercises which may help with the difficulties you are experiencing."}},
        {"@type": "Question", "name": "Does couples therapy include hands-on exercises?", "acceptedAnswer": {"@type": "Answer", "text": "While there is no physical touch between client(s) and therapist, couples may participate in a series of graduated physical touching exercises in the presence of the therapist."}}
      ]
    }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Nunito+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --cream: #FFFFFF;
            --warm-white: #FAFAF8;
            --blush: #E8D5CC;
            --dusty-rose: #C4A092;
            --deep-plum: #3D2B3D;
            --soft-charcoal: #2E2E2E;
            --muted-gold: #B89F7E;
            --sage: #8FA08A;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Nunito Sans', -apple-system, sans-serif;
            background-color: var(--cream);
            color: var(--soft-charcoal);
            line-height: 1.75;
            font-weight: 400;
            font-size: 16.5px;
            -webkit-font-smoothing: antialiased;
        }

        /* ─── NAV ─── */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 100;
            padding: 1.5rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.4s, backdrop-filter 0.4s;
        }
        nav.scrolled {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        nav .logo {
            display: flex;
            align-items: center;
        }
        nav .logo img {
            height: 60px;
            width: auto;
        }
        nav ul {
            list-style: none;
            display: flex;
            gap: 2.5rem;
        }
        nav a {
            text-decoration: none;
            color: var(--soft-charcoal);
            font-size: 0.85rem;
            font-weight: 400;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            transition: color 0.3s;
        }
        nav a:hover { color: var(--dusty-rose); }

        /* ─── BUTTONS ─── */
        .btn {
            display: inline-block;
            padding: 1rem 2.5rem;
            font-family: 'Nunito Sans', sans-serif;
            font-size: 0.85rem;
            font-weight: 400;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.4s ease;
        }
        .btn-primary {
            background: var(--deep-plum);
            color: var(--cream);
            border-radius: 50px;
        }
        .btn-primary:hover {
            background: #52375A;
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(61, 43, 61, 0.25);
        }
        .btn-outline {
            background: transparent;
            color: var(--deep-plum);
            border: 1px solid var(--dusty-rose);
            border-radius: 50px;
            margin-left: 1rem;
        }
        .btn-outline:hover {
            background: var(--dusty-rose);
            color: white;
        }
        .btn-light {
            background: rgba(255, 255, 255, 0.15);
            color: var(--cream);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
        }
        .btn-light:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* ─── SECTION COMMON ─── */
        .section-label {
            font-size: 0.75rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--dusty-rose);
            margin-bottom: 1rem;
        }
        .section-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2rem, 3.5vw, 3rem);
            font-weight: 300;
            color: var(--deep-plum);
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        /* ─── HERO ─── */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6rem 3rem;
            position: relative;
            overflow: hidden;
        }
        .hero-inner {
            max-width: 1200px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5rem;
            align-items: center;
        }
        .hero-text h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2.8rem, 5vw, 4.5rem);
            font-weight: 300;
            line-height: 1.15;
            color: var(--deep-plum);
            margin-bottom: 1.5rem;
        }
        .hero-text h1 em {
            font-style: italic;
            font-weight: 400;
            color: var(--dusty-rose);
        }
        .hero-text p {
            font-size: 1.1rem;
            color: #555;
            max-width: 440px;
            margin-bottom: 2.5rem;
            line-height: 1.8;
        }
        .hero-video-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .hero-video-wrapper {
            position: relative;
            width: 100%;
            max-width: 580px;
        }
        .hero-vid {
            width: 100%;
            height: auto;
            mix-blend-mode: multiply;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease;
        }
        .hero-vid:first-child {
            position: relative;
        }
        .hero-vid.hero-active {
            opacity: 1;
            pointer-events: auto;
        }

        .passion-video-wrapper {
            position: relative;
            width: 100%;
        }
        .passion-vid {
            width: 100%;
            height: auto;
            aspect-ratio: 464 / 688;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease;
        }
        .passion-vid.passion-active {
            position: relative;
            opacity: 1;
            pointer-events: auto;
        }

        .orgasmic-video-wrapper {
            position: relative;
            width: 100%;
        }
        .org-vid {
            width: 100%;
            height: auto;
            aspect-ratio: 464 / 688;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease;
        }
        .org-vid.org-active {
            position: relative;
            opacity: 1;
            pointer-events: auto;
        }

        .ketamine-video-wrapper {
            position: relative;
            width: 100%;
        }
        .ket-vid {
            width: 100%;
            height: auto;
            aspect-ratio: 464 / 688;
            background-color: #3D2B3D;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease;
        }
        .ket-vid.ket-active {
            position: relative;
            opacity: 1;
            pointer-events: auto;
        }

        /* ─── PRESS BAR ─── */
        .press-bar {
            background: #FFFFFF;
            padding: 3rem 2rem;
        }
        .press-inner {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            opacity: 0.75;
        }
        .press-inner img {
            height: 40px;
            width: auto;
            object-fit: contain;
            filter: grayscale(60%);
            transition: filter 0.3s ease, opacity 0.3s ease;
        }
        .press-inner img:hover {
            filter: grayscale(0%);
            opacity: 1;
        }
        @media (max-width: 768px) {
            .press-inner { gap: 2rem; padding: 2rem 1.5rem 0.5rem; }
            .press-inner img { height: 28px; }
        }

        /* ─── SERVICE SECTIONS (full-width stacked) ─── */
        .service-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6rem 3rem;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .service-inner {
            max-width: 1100px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5rem;
            align-items: center;
        }
        .service-inner.reverse {
            direction: rtl;
        }
        .service-inner.reverse > * {
            direction: ltr;
        }
        .service-text h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2.2rem, 4vw, 3.5rem);
            font-weight: 300;
            line-height: 1.15;
            color: var(--deep-plum);
            margin-bottom: 1rem;
        }
        .service-text h2 em {
            font-style: italic;
            font-weight: 400;
            color: var(--dusty-rose);
        }
        .service-text p {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.9;
            margin-bottom: 1.5rem;
        }
        .service-video-wrapper {
            position: relative;
            width: 100%;
        }
        .service-video-wrapper video {
            width: 100%;
            height: auto;
            display: block;
            mix-blend-mode: multiply;
        }

        /* Section color variations */
        .section-warm { background: var(--warm-white); }
        .section-white { background: var(--cream); }
        .section-blush { background: #FDF6F3; }
        .section-sage { background: #F4F7F3; }

        /* Dark section */
        .section-dark {
            background: var(--deep-plum);
        }
        .section-dark .service-text h2 {
            color: var(--cream);
        }
        .section-dark .service-text h2 em {
            color: var(--muted-gold);
        }
        .section-dark .service-text p {
            color: rgba(255, 255, 255, 0.65);
        }
        .section-dark .section-label {
            color: var(--muted-gold);
        }

        /* ─── ABOUT DIANA ─── */
        .about {
            padding: 7rem 3rem;
        }
        .about-inner {
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }
        .about-content p {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.9;
            margin-bottom: 1rem;
        }
        .about-video {
            order: -1;
        }
        .about-video video {
            width: 100%;
            height: auto;
            display: block;
        }
        .divider {
            width: 60px;
            height: 1px;
            background: var(--blush);
            margin: 2rem 0;
        }

        /* ─── CTA ─── */
        .cta {
            text-align: center;
            background: var(--warm-white);
            padding: 8rem 3rem;
        }
        .cta .section-title { margin-bottom: 1rem; }
        .cta p {
            font-size: 1.1rem;
            color: #888;
            max-width: 500px;
            margin: 0 auto 2.5rem;
        }

        /* ─── TESTIMONIALS ─── */
        .testimonials {
            background: var(--warm-white);
            padding: 4rem 3rem 2rem;
            overflow: hidden;
        }
        .testimonials .section-label,
        .testimonials .section-title { text-align: center; }
        .testimonials .section-title { margin-bottom: 3rem; }
        .testimonial-track {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }
        .testimonial-quote {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.35rem;
            font-style: italic;
            font-weight: 400;
            color: var(--deep-plum);
            line-height: 1.8;
            margin-bottom: 1.5rem;
            position: relative;
        }
        .testimonial-quote::before {
            content: '\201C';
            font-size: 4rem;
            color: var(--dusty-rose);
            position: absolute;
            top: -1.5rem;
            left: -0.5rem;
            font-style: normal;
            line-height: 1;
            opacity: 0.6;
        }
        .testimonial-author {
            font-family: 'Nunito Sans', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--dusty-rose);
            letter-spacing: 0.05em;
        }
        .testimonial-card {
            opacity: 0;
            transition: opacity 1.5s ease;
            position: absolute;
            top: 0; left: 0; width: 100%;
        }
        .testimonial-card.active-testimonial {
            opacity: 1;
            position: relative;
        }

        /* ─── CONTACT INFO ─── */
        .contact-info {
            background: var(--cream);
            padding: 5rem 3rem;
            border-top: 1px solid var(--blush);
        }
        .contact-info .section-label { text-align: center; margin-bottom: 0.5rem; }
        .contact-info h2 { text-align: center; margin-bottom: 3rem; }
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto 2.5rem;
        }
        .contact-card {
            text-align: center;
            padding: 1.5rem;
        }
        .contact-card h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--deep-plum);
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }
        .contact-card p {
            font-size: 0.95rem;
            color: #555;
            line-height: 1.7;
            margin: 0;
        }
        .contact-card a {
            color: var(--dusty-rose);
            text-decoration: none;
        }
        .contact-card a:hover { text-decoration: underline; }
        .contact-email {
            text-align: center;
            margin-top: 1rem;
            font-size: 1.05rem;
        }
        .contact-email a {
            color: var(--deep-plum);
            text-decoration: none;
            font-weight: 500;
        }
        .contact-email a:hover { text-decoration: underline; }
        @media (max-width: 768px) {
            .contact-grid { grid-template-columns: 1fr; gap: 1.5rem; }
        }

        /* ─── FOOTER ─── */
        footer {
            padding: 3rem;
            text-align: center;
            background: var(--cream);
            border-top: 1px solid var(--blush);
        }
        footer p {
            font-size: 0.8rem;
            color: #aaa;
            letter-spacing: 0.05em;
        }

        /* ─── SERVICE BULLETS ─── */
        .service-bullets {
            list-style: none;
            padding: 0;
            margin: 0.5rem 0 1.5rem;
        }
        .service-bullets li {
            font-size: 0.95rem;
            color: #777;
            line-height: 1.7;
            padding-left: 1rem;
            position: relative;
            margin-bottom: 0.3rem;
        }
        .service-bullets li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.6rem;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--dusty-rose);
        }
        .service-bullets-light li {
            color: rgba(255, 255, 255, 0.5);
        }
        .service-bullets-light li::before {
            background: var(--muted-gold);
        }

        /* ─── FAQ ─── */
        .faq {
            padding: 6rem 3rem;
            background: var(--cream);
        }
        .faq .section-label,
        .faq .section-title { text-align: center; }
        .faq .section-title { margin-bottom: 3rem; }
        .faq-list {
            max-width: 800px;
            margin: 0 auto;
        }
        .faq-item {
            border-bottom: 1px solid var(--blush);
        }
        .faq-question {
            width: 100%;
            background: none;
            border: none;
            padding: 1.25rem 2rem 1.25rem 0;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--deep-plum);
            text-align: left;
            cursor: pointer;
            position: relative;
            line-height: 1.4;
        }
        .faq-question::after {
            content: '+';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.4rem;
            color: var(--dusty-rose);
            transition: transform 0.3s;
        }
        .faq-question.faq-open::after {
            content: '−';
        }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s ease;
        }
        .faq-answer.faq-show {
            max-height: 300px;
            padding-bottom: 1.25rem;
        }
        .faq-answer p {
            font-size: 1rem;
            color: #666;
            line-height: 1.8;
        }

        /* ─── CREDENTIALS LIST ─── */
        .credentials-list {
            font-size: 0.9rem;
            color: #888;
            line-height: 1.8;
            list-style: none;
            padding: 0;
            margin: 0.5rem 0 1.5rem;
        }
        .credentials-list li {
            padding-left: 1rem;
            position: relative;
            margin-bottom: 0.4rem;
        }
        .credentials-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.65rem;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--dusty-rose);
        }

        /* ─── ANIMATIONS ─── */
        .fade-up {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        .fade-up.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ─── HAMBURGER MENU ─── */
        .nav-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }
        .nav-toggle span {
            display: block;
            width: 22px;
            height: 2px;
            background: var(--soft-charcoal);
            margin: 5px 0;
            transition: all 0.3s;
        }
        .nav-toggle.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
        .nav-toggle.active span:nth-child(2) { opacity: 0; }
        .nav-toggle.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

        /* ─── RESPONSIVE ─── */
        @media (max-width: 900px) {
            .hero { padding: 5rem 2rem 3rem; min-height: auto; }
            .hero-inner { grid-template-columns: 1fr; text-align: center; gap: 2rem; }
            .hero-text h1 { font-size: 2.4rem; }
            .hero-text p { margin-left: auto; margin-right: auto; }
            .hero-video-wrapper { width: 80%; max-width: 350px; margin: 0 auto; }
            .hero-text .btn { display: block; margin: 0.5rem auto; width: 80%; max-width: 280px; text-align: center; }
            .hero-text .btn-outline { margin-left: auto; margin-right: auto; }
            .hero-text > div { display: flex; flex-direction: column; align-items: center; }
            .service-inner { grid-template-columns: 1fr; gap: 2rem; }
            .service-inner.reverse { direction: ltr; }
            .service-section { min-height: auto; padding: 3rem 1.5rem; }
            .about-inner { grid-template-columns: 1fr; gap: 2rem; }
            .about-video { order: 1; }
            nav { padding: 1rem 1.5rem; }
            nav .logo img { height: 45px; }
            nav ul {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(255,255,255,0.95);
                backdrop-filter: blur(20px);
                padding: 1.5rem;
                gap: 1.5rem;
                text-align: center;
            }
            nav ul.mobile-open { display: flex; }
            .nav-toggle { display: block; }
            .cta { padding: 4rem 1.5rem; }
            .cta p { font-size: 1rem; }
            .testimonials { padding: 3rem 1.5rem 1rem; }
        }
    </style>
</head>
<body>

    <!-- Nav -->
    <nav id="nav">
        <a href="#" class="logo"><img src="logo.png" alt="Diana Urman"></a>
        <button class="nav-toggle" id="navToggle" aria-label="Menu">
            <span></span><span></span><span></span>
        </button>
        <ul id="navMenu">
            <li><a href="#confidence">Services</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <!-- ═══════════════════════════════════════════ -->
    <!-- HERO -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="hero">
        <div class="hero-inner">
            <div class="hero-text fade-up">
                <h1>Rediscover <em>intimacy</em> without shame</h1>
                <p>A safe, compassionate space to explore your sexuality, deepen connection, and heal, individually or with your partner.</p>
                <div>
                    <a href="#contact" class="btn btn-primary">Book a Session</a>
                    <a href="#confidence" class="btn btn-outline">Explore Services</a>
                </div>
            </div>
            <div class="hero-video-container fade-up">
                <div class="hero-video-wrapper">
                    <video id="hero0fwd" muted playsinline preload="auto" src="hero1-forward.mp4" poster="posters/hero1-forward.jpg" class="hero-vid hero-active"></video>
                    <video id="hero0rev" muted playsinline preload="auto" src="hero1-reverse.mp4" poster="posters/hero1-forward.jpg" class="hero-vid"></video>
                    <video id="hero1fwd" muted playsinline preload="auto" src="hero2-forward.mp4" poster="posters/hero2-forward.jpg" class="hero-vid"></video>
                    <video id="hero1rev" muted playsinline preload="auto" src="hero2-reverse.mp4" poster="posters/hero2-forward.jpg" class="hero-vid"></video>
                </div>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- PRESS / AS SEEN IN -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="press-bar">
        <div class="press-inner">
            <img src="press/cosmopolitan.png" alt="Cosmopolitan" loading="lazy">
            <img src="press/sfchronicle.png" alt="San Francisco Chronicle" loading="lazy" style="height:70px">
            <img src="press/huffpost.png" alt="HuffPost" loading="lazy">
            <img src="press/vice.png" alt="Vice" loading="lazy" style="height:55px">
            <img src="press/greenstate.png" alt="GreenState" loading="lazy">
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- EXPAND CONFIDENCE -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="service-section section-warm" id="confidence">
        <div class="service-inner reverse fade-up">
            <div class="service-text">
                <p class="section-label">Expand</p>
                <h2>Expand <em>Confidence</em></h2>
                <p>Your relationship with yourself is the foundation of every intimate connection. Together, we'll uncover what holds you back, body image, past experiences, or unspoken fears, and build a confident, embodied sense of self.</p>
                <ul class="service-bullets">
                    <li>Overcome shyness and performance anxiety</li>
                    <li>Learn to self-define and express your desires</li>
                    <li>Address erectile dysfunction</li>
                    <li>Learn ejaculation control</li>
                    <li>Tap into your inner wisdom to speak your truth</li>
                </ul>
            </div>
            <div class="service-video-wrapper" data-video-pool="confidence">
                <video id="conf0fwd" muted playsinline preload="metadata" class="section-video" src="confidence-forward.mp4" poster="posters/confidence-forward.jpg" style="width:100%;height:auto;">
                </video>
                <video id="conf0rev" muted playsinline preload="metadata" src="confidence-reverse.mp4" poster="posters/confidence-forward.jpg" style="width:100%;height:auto;display:none;">
                </video>
                <video id="conf1fwd" muted playsinline preload="metadata" src="confidence2-forward.mp4" poster="posters/confidence2-forward.jpg" style="width:100%;height:auto;display:none;">
                </video>
                <video id="conf1rev" muted playsinline preload="metadata" src="confidence2-reverse.mp4" poster="posters/confidence2-forward.jpg" style="width:100%;height:auto;display:none;">
                </video>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- REIGNITE PASSION -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="service-section section-white" id="passion">
        <div class="service-inner fade-up">
            <div class="service-text">
                <p class="section-label">Reignite</p>
                <h2>Reignite <em>Passion</em></h2>
                <p>Desire ebbs and flows, that's human. But when disconnection lingers, it can feel like loss. Couples therapy creates space to rebuild communication, rediscover each other, and find your way back to genuine intimacy.</p>
                <ul class="service-bullets">
                    <li>Uncover relationship gridlocks and negative patterns</li>
                    <li>Learn to communicate desires without defensiveness</li>
                    <li>Recover from an affair and rebuild trust</li>
                    <li>Enhance your erotic menu and explore fantasies together</li>
                    <li>Explore beliefs about monogamy and non-monogamy</li>
                </ul>
            </div>
            <div class="service-video-wrapper passion-video-wrapper" data-video-pool="passion">
                <video id="pass0fwd" width="464" height="688" muted playsinline preload="auto" src="passion-forward.mp4" poster="posters/passion-forward.jpg" class="passion-vid passion-active"></video>
                <video id="pass0rev" width="464" height="688" muted playsinline preload="auto" src="passion-reverse.mp4" poster="posters/passion-forward.jpg" class="passion-vid"></video>
                <video id="pass1fwd" width="464" height="688" muted playsinline preload="auto" src="passion2-forward.mp4" poster="posters/passion2-forward.jpg" class="passion-vid"></video>
                <video id="pass1rev" width="464" height="688" muted playsinline preload="auto" src="passion2-reverse.mp4" poster="posters/passion2-forward.jpg" class="passion-vid"></video>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- BE ORGASMIC -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="service-section section-blush" id="orgasmic">
        <div class="service-inner reverse fade-up">
            <div class="service-text">
                <p class="section-label">Experience</p>
                <h2>Be <em>Orgasmic</em></h2>
                <p>Pleasure is your birthright, not a luxury. Many people have never been taught how their bodies work, or carry shame that blocks sensation. Through somatic awareness and evidence-based techniques, we'll help you access deeper pleasure and presence.</p>
                <ul class="service-bullets">
                    <li>Discover impediments to orgasm</li>
                    <li>Learn how to pleasure yourself and teach your partner</li>
                    <li>Increase sexual desire and feel erotically vibrant</li>
                    <li>Explore your body's full potential</li>
                    <li>Address physical discomfort or past trauma</li>
                </ul>
            </div>
            <div class="service-video-wrapper orgasmic-video-wrapper" data-video-pool="orgasmic">
                <video id="org0fwd" muted playsinline preload="metadata" src="orgasmic-forward.mp4" poster="posters/orgasmic-forward.jpg" class="org-vid org-active"></video>
                <video id="org0rev" muted playsinline preload="metadata" src="orgasmic-reverse.mp4" poster="posters/orgasmic-forward.jpg" class="org-vid"></video>
                <video id="org1fwd" muted playsinline preload="metadata" src="orgasmic2-forward.mp4" poster="posters/orgasmic2-forward.jpg" class="org-vid"></video>
                <video id="org1rev" muted playsinline preload="metadata" src="orgasmic2-reverse.mp4" poster="posters/orgasmic2-forward.jpg" class="org-vid"></video>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- KETAMINE ASSISTED THERAPY -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="service-section section-dark" id="ketamine">
        <div class="service-inner fade-up">
            <div class="service-text">
                <p class="section-label">Transform</p>
                <h2>Ketamine-Assisted <em>Therapy</em></h2>
                <p>For those who feel stuck, when talk therapy alone isn't enough, ketamine-assisted therapy offers a powerful path to breakthroughs. In a carefully held, medically supervised setting, ketamine can help dissolve rigid patterns, access buried emotions, and open new neural pathways for healing.</p>
                <ul class="service-bullets service-bullets-light">
                    <li>Dissolve rigid emotional patterns</li>
                    <li>Access buried emotions and open new neural pathways</li>
                    <li>Enhance connection and intimacy in your relationship</li>
                    <li>Effective for trauma, treatment-resistant depression, and anxiety</li>
                    <li>Deep-seated blocks around intimacy and connection</li>
                </ul>
            </div>
            <div class="service-video-wrapper ketamine-video-wrapper" data-video-pool="ketamine">
                <video id="ket0fwd" width="464" height="688" muted playsinline preload="auto" src="ketamine-forward.mp4" poster="posters/ketamine-forward.jpg" class="ket-vid ket-active"></video>
                <video id="ket0rev" width="464" height="688" muted playsinline preload="auto" src="ketamine-reverse.mp4" poster="posters/ketamine-forward.jpg" class="ket-vid"></video>
                <video id="ket1fwd" width="464" height="688" muted playsinline preload="auto" src="ketamine2-forward.mp4" poster="posters/ketamine2-forward.jpg" class="ket-vid"></video>
                <video id="ket1rev" width="464" height="688" muted playsinline preload="auto" src="ketamine2-reverse.mp4" poster="posters/ketamine2-forward.jpg" class="ket-vid"></video>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- ABOUT DIANA -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="about section-white" id="about">
        <div class="about-inner">
            <div class="about-content fade-up">
                <p class="section-label">Our Approach</p>
                <h2 class="section-title">Pleasure and quality of life, not dysfunction</h2>
                <div class="divider"></div>
                <p>I view sexuality from the perspective of pleasure and quality of life, not from a dysfunction-based model. My professional and personal goal is to assist my clients in the process of self-healing and growth, helping them realize their full potential through expressing their sexuality.</p>
                <p>Whether you want to increase your confidence, explore fantasies, or discover a new level of intimacy with your partner, I can help. My specialties include treating issues with erectile dysfunction, sexual trauma, loss of desire, and relationships in couples, women, and men.</p>
                <p>My work is incredibly rewarding, and I truly love being able to empower my clients.</p>
            </div>
            <div class="about-video fade-up">
                <video id="aboutFwd" poster="posters/about-video.jpg" muted playsinline preload="none" style="width:100%;height:auto;display:block">
                </video>
                <video id="aboutRev" poster="posters/about-video.jpg" muted playsinline preload="none" style="width:100%;height:auto;display:none">
                </video>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- ABOUT DIANA -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="service-section section-warm" id="diana">
        <div class="service-inner fade-up">
            <div class="service-text">
                <p class="section-label">About Diana</p>
                <h2>Meet <em>Diana Urman</em></h2>
                <p>I have a PhD in Human Sexuality from the Institute for Advanced Study of Human Sexuality, as well as a graduate degree (MSW) in Clinical Social Work. I am a California State Licensed Clinical Social Worker (LCSW #26883) and Certified Clinical Sexologist.</p>
                <ul class="credentials-list">
                    <li>Advanced training in Attachment Theory, Imago Therapy, Integrative Model of Couples Therapy, Differentiation Model, and the Somatica Method</li>
                    <li>Member of AASECT (American Association of Sexuality Educators, Counselors and Therapists)</li>
                    <li>Certified Sex Educator, San Francisco Sex Information (SFSI)</li>
                    <li>Somatica Professional Couples Training</li>
                    <li>David Schnarch training: Crucible® Mind Mapping Therapy, Treating Extra-Relationship Affairs, 5-day Clinical Practicum, Crucible® Intimacy and Desire</li>
                    <li>Tammy Nelson workshop: Creating Connected Couples</li>
                    <li>The Couples Institute study group with Dr. Ellyn Bader and Dr. Peter Pearson</li>
                </ul>
                <p>I'd love to learn more about you and why you might be considering therapy. <a href="#contact" style="color:var(--dusty-rose);text-decoration:none;font-weight:500;">Schedule a free phone consultation today.</a></p>
            </div>
            <div class="service-video-wrapper diana-video-wrapper">
                <video id="diana0fwd" width="724" height="960" muted playsinline preload="auto" src="diana-forward.mp4" poster="posters/diana-forward.jpg" class="diana-vid diana-active" style="width:100%;height:auto;"></video>
                <video id="diana0rev" width="724" height="960" muted playsinline preload="auto" src="diana-reverse.mp4" poster="posters/diana-forward.jpg" class="diana-vid" style="width:100%;height:auto;display:none;"></video>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- TESTIMONIALS -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="testimonials" id="testimonials">
        <div class="fade-up">
            <p class="section-label">Client Stories</p>
            <h2 class="section-title">What Clients Are Saying</h2>
                <div class="testimonial-track" id="testimonialTrack">
                    <div class="testimonial-card">
                        <p class="testimonial-quote">I have been meeting with Diana for over a year and have gained so much knowledge and confidence from our sessions. From the very beginning I felt comfortable enough to openly discuss whatever is on my mind without judgment. She has the calm and expertise to listen, offer guidance, and suggest resources for a wide range of topics.</p>
                        <p class="testimonial-author">Phoebe C.</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-quote">Diana and I have been meeting for 8 months now and I have gained so much from her knowledge and expertise in love and relationships. In her compassionate yet firm way she has helped me to evaluate my own self-imposed 'stories' and listen to my mind and body without judgement. I find I am a calmer, more compassionate, self respecting person today.</p>
                        <p class="testimonial-author">Adrienne L.</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-quote">Diana is a wonderful support to me and I look forward to our sessions every time. She makes our time together so productive that I always leave feeling like I have accomplished something or made a breakthrough.</p>
                        <p class="testimonial-author">Madeleine G.</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-quote">It is easy to underestimate the progress she helps you achieve and take it for granted because positive changes settle quickly. It sometimes took me a thorough look back at myself six months ago that made me realize how far Diana helped me travel. I highly recommend Diana for anyone who is interested in soul searching deep-dive style.</p>
                        <p class="testimonial-author">Natalia L.</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-quote">Diana is among the very best, in my experience. Her calm, straightforward manner put me at ease instantly. She has always been insightful and helpful. She occasionally also suggests outside readings, which have always proven very useful. I recommend her highly!</p>
                        <p class="testimonial-author">Rob S.</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-quote">Along the way, I have gained problem solving and coping skills, as well as a greater sense of self. Her kind, gentle nature creates an environment which allows you to feel comfortable opening up. I leave each session feeling more prepared and confident to handle whatever lies ahead!</p>
                        <p class="testimonial-author">P.</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-quote">Diana Urman leads a personalized, yet goal-oriented approach to self awareness and discovery. Her compassionate yet direct practices have helped me achieve practical results I have not experienced with other therapeutic methods.</p>
                        <p class="testimonial-author">A.</p>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-quote">Specializing in sex and relationships, Diana has given me insight into the most priceless endeavor: fostering and maintaining a healthy, giving, and compassionate relationship with my partner.</p>
                        <p class="testimonial-author">S.</p>
                    </div>
                </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- FAQ -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="faq" id="faq">
        <div class="fade-up">
            <p class="section-label">Common Questions</p>
            <h2 class="section-title">Q & A</h2>
            <div class="faq-list">
                <div class="faq-item">
                    <button class="faq-question">What is sex therapy?</button>
                    <div class="faq-answer"><p>Sex therapy is a form of talk therapy where you can expect the therapist to evaluate your concerns and assess your relevant history. One of the purposes of sex therapy is to increase your level of confidence in and out of the bedroom. Sex therapy can also help you improve your already great sex life. The most frequent therapeutic outcome is the relief that comes with being able to freely share sexual feelings, thoughts, and fantasies.</p></div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">How can I be open about intimate issues with someone I've just met?</button>
                    <div class="faq-answer"><p>Your ability and willingness to be open and honest about your difficulties and concerns are key elements of your success in sex and relationship therapy. One of my roles as a therapist is to provide an open and safe environment where you feel safe to express your fears and difficulties.</p></div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">Are there homework assignments after each session?</button>
                    <div class="faq-answer"><p>Not always, but frequently I will ask you to read certain books and/or complete exercises which may help you with some of the difficulties you are experiencing.</p></div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">What if I feel uncomfortable sharing when my partner is present?</button>
                    <div class="faq-answer"><p>While it is essential to see both partners in couples therapy sessions, very frequently, especially in the beginning of treatment, it may be necessary to see partners separately to alleviate transitional discomfort.</p></div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">Can I start therapy alone and include my partner later?</button>
                    <div class="faq-answer"><p>Absolutely. Very frequently my clients start their therapy as a solo experience and choose to include their partners later, once they've achieved certain goals and objectives on their own.</p></div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">Does couples therapy include any hands-on exercises?</button>
                    <div class="faq-answer"><p>While there is no physical touch between client(s) and therapist, couples may participate in a series of graduated physical touching exercises in the presence of the therapist.</p></div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">Do you accept insurance?</button>
                    <div class="faq-answer"><p>While I currently do not accept insurance, your insurance may reimburse you for all or part of our sessions. I'm happy to provide you with itemized receipts to submit to your insurance company.</p></div>
                </div>
                <div class="faq-item">
                    <button class="faq-question">What methodology do you use for sex and relationship therapy?</button>
                    <div class="faq-answer"><p>I use an integrative approach that combines both sex therapy and relationship therapy. This approach focuses on your personal development and ability to reach your sexual potential by increasing your capacity for intimacy and passion throughout the process of resolving sexual problems. Rather than telling you what to do or how to do it, this methodology uses your spontaneous sexual behavior as a window into yourself and your partner. This emphasis on personal growth differs from other conventional therapies that emphasize communication skills, empathic listening and negotiation. One of the main goals of this therapy is to increase your ability to tolerate anxiety and develop your skills to approach difficult topics with your partner.</p></div>
                </div>
            </div>
        </div>
    </section>

    <!-- ═══════════════════════════════════════════ -->
    <!-- CTA -->
    <!-- ═══════════════════════════════════════════ -->
    <section class="cta" id="contact">
        <div class="fade-up">
            <p class="section-label">Take the First Step</p>
            <h2 class="section-title">Free Phone <em>Consultation</em></h2>
            <p>Therapy offers tremendous opportunity for personal growth, and it's important to find a therapist who is a good fit for you.</p>
            <p>My free 15-minute initial phone consultation is a chance for you to meet me, ask questions, and learn more about my services. I look forward to speaking with you!</p>
            <div class="spwidget-button-wrapper" style="margin:2rem 0 1rem;">
                <a href="https://diana.clientsecure.me" class="btn btn-primary" data-spwidget-scope-id="29b87bc7-3414-4619-a781-ada56529d6ac" data-spwidget-scope-uri="diana" data-spwidget-application-id="7c72cb9f9a9b913654bb89d6c7b4e71a77911b30192051da35384b4d0c6d505b" data-spwidget-scope-global data-spwidget-autobind>Schedule Free Consultation</a>
            </div>
            <script src="https://widget-cdn.simplepractice.com/assets/integration-1.0.js"></script>
            <p style="font-size:0.9rem;color:#aaa;margin-top:1rem;">Existing clients: <a href="mailto:diana@dianaurman.com" style="color:var(--dusty-rose);text-decoration:none;">diana@dianaurman.com</a><br><span style="font-size:0.95rem;color:var(--dusty-rose);">In-person and video sessions available.</span></p>
        </div>
    </section>

    <!-- Contact Info -->
    <section class="contact-info" id="locations">
        <div class="fade-up">
            <p class="section-label">Locations</p>
            <h2 class="section-title">Get in Touch</h2>
            <div class="contact-grid">
                <div class="contact-card">
                    <h3>Serving San Francisco<br>and Bay Area</h3>
                    <p>Noe Valley Office<br>4112 24th Street<br>San Francisco, CA 94114<br><a href="tel:+14157295173">(415) 729-5173</a></p>
                </div>
                <div class="contact-card">
                    <h3>Serving Calistoga<br>and Napa Valley</h3>
                    <p>Calistoga, CA 94515<br><a href="tel:+14157295173">(415) 729-5173</a></p>
                </div>
                <div class="contact-card">
                    <h3>Serving Santa Barbara, Montecito,<br>Summerland, and Carpinteria</h3>
                    <p>Santa Barbara Office, CA 93067<br><a href="tel:+14157295173">(415) 729-5173</a></p>
                </div>
            </div>
            <p class="contact-email"><a href="mailto:diana@dianaurman.com">diana@dianaurman.com</a></p>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; <script>document.write(new Date().getFullYear())</script> Diana Urman, PhD, LCSW &nbsp;·&nbsp; License #26883 &nbsp;·&nbsp; Design by <a href="https://sashakish.github.io/unuanova/" target="_blank" style="color:var(--dusty-rose);text-decoration:none;">Unua Nova</a></p>
    </footer>

    <!-- Mobile: swap to half-res videos BEFORE handlers run -->
    <script>
    (function() {
        if (window.innerWidth > 900) return;
        document.querySelectorAll('video[src]').forEach(function(v) {
            var s = v.getAttribute('src');
            if (s && s.endsWith('.mp4') && !s.startsWith('mobile/')) {
                v.setAttribute('src', 'mobile/' + s);
            }
        });
    })();
    </script>

    <canvas id="stardust" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;"></canvas>

    <script>
        // ─── STARDUST PARTICLES ───
        (() => {
            const canvas = document.getElementById('stardust');
            const ctx = canvas.getContext('2d');
            let w, h;

            const resize = () => {
                w = canvas.width = window.innerWidth;
                h = canvas.height = window.innerHeight;
            };
            resize();
            window.addEventListener('resize', resize);

            const NUM = 60;
            const particles = [];
            for (let i = 0; i < NUM; i++) {
                particles.push({
                    x: Math.random() * 3000,
                    y: Math.random() * 10000, // spread across full page height
                    r: Math.random() * 2 + 0.5,
                    speedX: (Math.random() - 0.5) * 0.3,
                    speedY: (Math.random() - 0.5) * 0.2,
                    twinkleSpeed: Math.random() * 0.02 + 0.005,
                    twinkleOffset: Math.random() * Math.PI * 2,
                });
            }

            // Track which vertical ranges are "light sections"
            const getLightRanges = () => {
                const ranges = [];
                // Hero section
                const hero = document.querySelector('.hero');
                if (hero) {
                    const r = hero.getBoundingClientRect();
                    ranges.push({ top: r.top + window.scrollY, bottom: r.bottom + window.scrollY });
                }
                // Light service sections
                document.querySelectorAll('.section-white, .section-warm, .section-blush, .section-sage').forEach(el => {
                    const r = el.getBoundingClientRect();
                    ranges.push({ top: r.top + window.scrollY, bottom: r.bottom + window.scrollY });
                });
                // About section
                const about = document.querySelector('.about.section-white');
                if (about) {
                    const r = about.getBoundingClientRect();
                    ranges.push({ top: r.top + window.scrollY, bottom: r.bottom + window.scrollY });
                }
                // CTA
                const cta = document.querySelector('.cta');
                if (cta) {
                    const r = cta.getBoundingClientRect();
                    ranges.push({ top: r.top + window.scrollY, bottom: r.bottom + window.scrollY });
                }
                return ranges;
            };

            let lightRanges = getLightRanges();
            window.addEventListener('scroll', () => { lightRanges = getLightRanges(); });
            window.addEventListener('resize', () => { lightRanges = getLightRanges(); });

            const isInLightSection = (pageY) => {
                for (const range of lightRanges) {
                    if (pageY >= range.top && pageY <= range.bottom) return true;
                }
                return false;
            };

            const animate = () => {
                ctx.clearRect(0, 0, w, h);
                const scrollY = window.scrollY;

                particles.forEach(p => {
                    p.x += p.speedX;
                    p.y += p.speedY;

                    // Wrap around
                    if (p.x < -10) p.x = w + 10;
                    if (p.x > w + 10) p.x = -10;
                    if (p.y < -10) p.y += h + 20;
                    if (p.y > 10000) p.y -= 10000;

                    // Screen position
                    const screenY = p.y - scrollY;
                    if (screenY < -20 || screenY > h + 20) return;

                    // Only show in light sections
                    if (!isInLightSection(p.y)) return;

                    // Twinkle
                    const twinkle = Math.sin(Date.now() * p.twinkleSpeed + p.twinkleOffset);
                    const alpha = 0.15 + (twinkle + 1) * 0.25; // 0.15 to 0.65
                    const size = p.r * (0.8 + (twinkle + 1) * 0.3);

                    // Draw sparkle
                    ctx.save();
                    ctx.globalAlpha = alpha;
                    ctx.fillStyle = '#C4A092';
                    ctx.shadowBlur = size * 4;
                    ctx.shadowColor = 'rgba(196, 160, 146, 0.5)';
                    ctx.beginPath();
                    ctx.arc(p.x, screenY, size, 0, Math.PI * 2);
                    ctx.fill();

                    // Cross sparkle for larger particles
                    if (p.r > 1.2 && twinkle > 0.3) {
                        ctx.globalAlpha = alpha * 0.5;
                        ctx.strokeStyle = '#C4A092';
                        ctx.lineWidth = 0.5;
                        const len = size * 3;
                        ctx.beginPath();
                        ctx.moveTo(p.x - len, screenY);
                        ctx.lineTo(p.x + len, screenY);
                        ctx.moveTo(p.x, screenY - len);
                        ctx.lineTo(p.x, screenY + len);
                        ctx.stroke();
                    }
                    ctx.restore();
                });

                requestAnimationFrame(animate);
            };
            animate();
        })();

        // ─── NAV SCROLL ───
        const nav = document.getElementById('nav');
        window.addEventListener('scroll', () => {
            nav.classList.toggle('scrolled', window.scrollY > 50);
        });

        // ─── HAMBURGER MENU ───
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');
        navToggle.addEventListener('click', () => {
            navToggle.classList.toggle('active');
            navMenu.classList.toggle('mobile-open');
        });
        navMenu.querySelectorAll('a').forEach(a => {
            a.addEventListener('click', () => {
                navToggle.classList.remove('active');
                navMenu.classList.remove('mobile-open');
            });
        });

        // ─── FADE-UP ON SCROLL ───
        const fadeObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, { threshold: 0.15 });
        document.querySelectorAll('.fade-up').forEach(el => fadeObserver.observe(el));

        // ─── LAZY LOAD VIDEOS ───
        // Only load videos when they're within 500px of the viewport
        const lazyVideoObserver = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    const video = e.target;
                    if (video.preload === 'none' || video.preload === '') {
                        video.preload = 'auto';
                        if (video.dataset.src) {
                            video.src = video.dataset.src;
                        }
                        video.load();
                    }
                    lazyVideoObserver.unobserve(video);
                }
            });
        }, { rootMargin: '500px 0px 500px 0px' });

        document.querySelectorAll('video[preload="none"]').forEach(v => lazyVideoObserver.observe(v));

        // ─── HERO VIDEO: stacked, random on load, forward/reverse ───
        (() => {
            const wrapper = document.querySelector('.hero-video-wrapper');
            if (!wrapper) return;

            const allVids = wrapper.querySelectorAll('.hero-vid');
            const pairs = [
                { fwd: document.getElementById('hero0fwd'), rev: document.getElementById('hero0rev') },
                { fwd: document.getElementById('hero1fwd'), rev: document.getElementById('hero1rev') },
            ];

            let currentIdx = Math.floor(Math.random() * pairs.length);
            let playingForward = true;
            let heroPlaying = false;

            const activate = (vid) => {
                allVids.forEach(v => v.classList.remove('hero-active'));
                vid.classList.add('hero-active');
            };

            // Initial state
            activate(pairs[currentIdx].fwd);
            pairs[currentIdx].fwd.play().catch(() => {});
            heroPlaying = true;

            pairs.forEach(p => {
                p.fwd.addEventListener('ended', () => { heroPlaying = false; playingForward = true; });
                p.rev.addEventListener('ended', () => { heroPlaying = false; playingForward = false; });
            });

            const triggerHero = () => {
                if (heroPlaying) return;
                heroPlaying = true;
                const pair = pairs[currentIdx];
                if (playingForward) {
                    activate(pair.rev);
                    pair.rev.currentTime = 0;
                    pair.rev.play().catch(() => {});
                    playingForward = false;
                } else {
                    activate(pair.fwd);
                    pair.fwd.currentTime = 0;
                    pair.fwd.play().catch(() => {});
                    playingForward = true;
                }
            };

            // Hero pool only changes on page reload (random pick above)

            const isMobile = window.matchMedia('(max-width: 900px)').matches || 'ontouchstart' in window;

            if (isMobile) {
                wrapper.addEventListener('touchstart', triggerHero);
                let firstPlay = true;
                const heroObserver = new IntersectionObserver((entries) => {
                    entries.forEach(e => {
                        if (e.isIntersecting && !heroPlaying) {
                            if (firstPlay) { firstPlay = false; return; }
                            triggerHero();
                        }
                    });
                }, { threshold: 0.3 });
                heroObserver.observe(wrapper);
            } else {
                let mouseIsOver = false;
                wrapper.addEventListener('mouseenter', () => { mouseIsOver = true; triggerHero(); });
                wrapper.addEventListener('mouseleave', () => { mouseIsOver = false; });
                wrapper.addEventListener('click', triggerHero);
                wrapper.addEventListener('mousemove', () => { if (mouseIsOver && !heroPlaying) triggerHero(); });
            }
        })();

        // ─── SECTION VIDEOS: auto-play when scrolled into view ───
        document.querySelectorAll('.section-video').forEach(video => {
            let started = false;
            let playing = false;

            video.addEventListener('ended', () => { playing = false; });

            const playVideo = () => {
                if (playing) return;
                playing = true;
                video.currentTime = 0;
                video.play().catch(() => { playing = false; });
            };

            // Auto-play on scroll into view
            const sectionObs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting && !started) {
                        started = true;
                        playVideo();
                    }
                });
            }, { threshold: 0.3 });
            sectionObs.observe(video);

            // Re-play on interaction
            video.addEventListener('click', () => { if (!playing) { started = false; playVideo(); } });
            video.addEventListener('mouseenter', () => { if (!playing) playVideo(); });
            video.addEventListener('touchstart', () => { if (!playing) playVideo(); });
        });

        // ─── CONFIDENCE VIDEO: 2-video pool, forward then reverse on hover, swap off-screen ───
        (() => {
            const cPairs = [
                { fwd: document.getElementById('conf0fwd'), rev: document.getElementById('conf0rev') },
                { fwd: document.getElementById('conf1fwd'), rev: document.getElementById('conf1rev') },
            ];
            if (!cPairs[0].fwd) return;

            let cIdx = Math.floor(Math.random() * cPairs.length);
            let cPlaying = false;
            let cState = 'idle';
            let cStarted = false;

            const hideAllC = () => {
                cPairs.forEach(p => {
                    p.fwd.style.display = 'none';
                    p.rev.style.display = 'none';
                });
            };

            const showCFwd = () => { hideAllC(); cPairs[cIdx].fwd.style.display = 'block'; };
            const showCRev = () => { hideAllC(); cPairs[cIdx].rev.style.display = 'block'; };

            showCFwd();

            // Ended listeners for all pairs
            cPairs.forEach(p => {
                p.fwd.addEventListener('ended', () => { cPlaying = false; cState = 'ended-fwd'; });
                p.rev.addEventListener('ended', () => {
                    cPlaying = false;
                    cState = 'ended-rev';
                    showCFwd();
                    cPairs[cIdx].fwd.currentTime = 0;
                });
            });

            const triggerC = () => {
                if (cPlaying) return;
                if (cState === 'ended-fwd') {
                    cPlaying = true;
                    showCRev();
                    cPairs[cIdx].rev.currentTime = 0;
                    cPairs[cIdx].rev.play().catch(() => { cPlaying = false; });
                    cState = 'playing-rev';
                } else if (cState === 'ended-rev' || cState === 'idle') {
                    cPlaying = true;
                    showCFwd();
                    cPairs[cIdx].fwd.currentTime = 0;
                    cPairs[cIdx].fwd.play().catch(() => { cPlaying = false; });
                    cState = 'playing-fwd';
                }
            };

            const cWrapper = cPairs[0].fwd.closest('.service-video-wrapper');

            // Interaction listeners
            cPairs.forEach(p => {
                [p.fwd, p.rev].forEach(v => {
                    v.addEventListener('click', triggerC);
                    v.addEventListener('mouseenter', triggerC);
                    v.addEventListener('touchstart', triggerC);
                });
            });

            let cMouseOver = false;
            cWrapper.addEventListener('mouseenter', () => { cMouseOver = true; });
            cWrapper.addEventListener('mouseleave', () => { cMouseOver = false; });
            cWrapper.addEventListener('mousemove', () => { if (cMouseOver && !cPlaying) triggerC(); });

            // Auto-play forward on scroll into view + preload all
            const cObs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting && !cStarted) {
                        cStarted = true;
                        cPlaying = true;
                        cState = 'playing-fwd';
                        cPairs.forEach(p => {
                            p.fwd.preload = 'auto'; p.fwd.load();
                            p.rev.preload = 'auto'; p.rev.load();
                        });
                        cPairs[cIdx].fwd.play().catch(() => { cPlaying = false; });
                    }
                });
            }, { threshold: 0.3 });
            cObs.observe(cWrapper);

            // Swap pool when off-screen
            const cSwapObs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (!e.isIntersecting && cPairs.length > 1) {
                        let next;
                        do { next = Math.floor(Math.random() * cPairs.length); } while (next === cIdx);
                        cIdx = next;
                        cPlaying = false;
                        cState = 'idle';
                        cStarted = false;
                        showCFwd();
                    }
                });
            }, { threshold: 0 });
            cSwapObs.observe(cWrapper);
        })();

        // ─── PASSION VIDEO: mirrors hero handler exactly ───
        (() => {
            var pWrapper = document.querySelector('.passion-video-wrapper');
            if (!pWrapper) return;

            var allPVids = pWrapper.querySelectorAll('.passion-vid');
            var pPairs = [
                { fwd: document.getElementById('pass0fwd'), rev: document.getElementById('pass0rev') },
                { fwd: document.getElementById('pass1fwd'), rev: document.getElementById('pass1rev') },
            ];

            var pIdx = Math.floor(Math.random() * pPairs.length);
            var pPlayingFwd = true;
            var pPlaying = false;

            var activateP = function(vid) {
                allPVids.forEach(function(v) { v.classList.remove('passion-active'); });
                vid.classList.add('passion-active');
            };

            // Initial state, show first frame of selected pair
            activateP(pPairs[pIdx].fwd);

            pPairs.forEach(function(p) {
                p.fwd.addEventListener('ended', function() { pPlaying = false; pPlayingFwd = true; });
                p.rev.addEventListener('ended', function() { pPlaying = false; pPlayingFwd = false; });
            });

            var triggerPassion = function() {
                if (pPlaying) return;
                pPlaying = true;
                var pair = pPairs[pIdx];
                if (pPlayingFwd) {
                    activateP(pair.rev);
                    pair.rev.currentTime = 0;
                    pair.rev.play().catch(function() { pPlaying = false; });
                    pPlayingFwd = false;
                } else {
                    activateP(pair.fwd);
                    pair.fwd.currentTime = 0;
                    pair.fwd.play().catch(function() { pPlaying = false; });
                    pPlayingFwd = true;
                }
            };

            // Auto-play forward every time section scrolls into view
            var pAutoObs = new IntersectionObserver(function(entries) {
                entries.forEach(function(e) {
                    if (e.isIntersecting && !pPlaying) {
                        pPlaying = true;
                        pPlayingFwd = true;
                        activateP(pPairs[pIdx].fwd);
                        pPairs[pIdx].fwd.currentTime = 0;
                        pPairs[pIdx].fwd.play().catch(function() { pPlaying = false; });
                    }
                });
            }, { threshold: 0.1 });
            pAutoObs.observe(pWrapper);

            var isMobile = window.matchMedia('(max-width: 900px)').matches || 'ontouchstart' in window;

            if (isMobile) {
                pWrapper.addEventListener('touchstart', triggerPassion);
            } else {
                var pMouseOver = false;
                pWrapper.addEventListener('mouseenter', function() { pMouseOver = true; triggerPassion(); });
                pWrapper.addEventListener('mouseleave', function() { pMouseOver = false; });
                pWrapper.addEventListener('click', triggerPassion);
                pWrapper.addEventListener('mousemove', function() { if (pMouseOver && !pPlaying) triggerPassion(); });
            }

            // Swap pool when off-screen
            var pSwapObs = new IntersectionObserver(function(entries) {
                entries.forEach(function(e) {
                    if (!e.isIntersecting && pPairs.length > 1) {
                        var next;
                        do { next = Math.floor(Math.random() * pPairs.length); } while (next === pIdx);
                        pIdx = next;
                        pPlaying = false;
                        pPlayingFwd = true;
                        activateP(pPairs[pIdx].fwd);
                    }
                });
            }, { threshold: 0 });
            pSwapObs.observe(pWrapper);
        })();

        // ─── KETAMINE VIDEO: 2-video pool, one video at a time ───
        (function() {
            var kWrapper = document.querySelector('.ketamine-video-wrapper');
            if (!kWrapper) return;
            var allKVids = kWrapper.querySelectorAll('.ket-vid');
            var kPairs = [
                { fwd: document.getElementById('ket0fwd'), rev: document.getElementById('ket0rev') },
                { fwd: document.getElementById('ket1fwd'), rev: document.getElementById('ket1rev') },
            ];
            if (!kPairs[0].fwd) return;

            var kIdx = Math.floor(Math.random() * kPairs.length);
            var kPlaying = false;
            var kPlayingFwd = true;

            var activateK = function(vid) {
                allKVids.forEach(function(v) { v.classList.remove('ket-active'); });
                vid.classList.add('ket-active');
            };
            activateK(kPairs[kIdx].fwd);

            kPairs.forEach(function(p) {
                p.fwd.addEventListener('ended', function() { kPlaying = false; kPlayingFwd = true; });
                p.rev.addEventListener('ended', function() { kPlaying = false; kPlayingFwd = false; });
            });

            var triggerK = function() {
                if (kPlaying) return;
                kPlaying = true;
                var pair = kPairs[kIdx];
                if (kPlayingFwd) {
                    activateK(pair.fwd);
                    pair.fwd.currentTime = 0;
                    pair.fwd.play().catch(function() { kPlaying = false; });
                    kPlayingFwd = false;
                } else {
                    activateK(pair.rev);
                    pair.rev.currentTime = 0;
                    pair.rev.play().catch(function() { kPlaying = false; });
                    kPlayingFwd = true;
                }
            };

            var kAutoObs = new IntersectionObserver(function(entries) {
                entries.forEach(function(e) {
                    if (e.isIntersecting && !kPlaying) {
                        triggerK();
                    }
                });
            }, { threshold: 0.1 });
            kAutoObs.observe(kWrapper);

            var isMobile = window.matchMedia('(max-width: 900px)').matches || 'ontouchstart' in window;
            if (isMobile) {
                kWrapper.addEventListener('touchstart', triggerK);
            } else {
                var kMouseOver = false;
                kWrapper.addEventListener('mouseenter', function() { kMouseOver = true; triggerK(); });
                kWrapper.addEventListener('mouseleave', function() { kMouseOver = false; });
                kWrapper.addEventListener('click', triggerK);
                kWrapper.addEventListener('mousemove', function() { if (kMouseOver && !kPlaying) triggerK(); });
            }

            // Swap pool when off-screen
            var kSwapObs = new IntersectionObserver(function(entries) {
                entries.forEach(function(e) {
                    if (!e.isIntersecting && kPairs.length > 1) {
                        var next;
                        do { next = Math.floor(Math.random() * kPairs.length); } while (next === kIdx);
                        kIdx = next;
                        kPlaying = false;
                        kPlayingFwd = true;
                        activateK(kPairs[kIdx].fwd);
                    }
                });
            }, { threshold: 0 });
            kSwapObs.observe(kWrapper);
        })();

        // ─── ORGASMIC VIDEO: 2-video pool, forward then reverse on hover, swap off-screen ───
        (() => {
            const oPairs = [
                { fwd: document.getElementById('org0fwd'), rev: document.getElementById('org0rev') },
                { fwd: document.getElementById('org1fwd'), rev: document.getElementById('org1rev') },
            ];
            if (!oPairs[0].fwd) return;

            let oIdx = Math.floor(Math.random() * oPairs.length);
            let oPlaying = false;
            let oState = 'idle';
            let oStarted = false;

            const hideAllO = () => {
                oPairs.forEach(p => {
                    p.fwd.classList.remove('org-active');
                    p.rev.classList.remove('org-active');
                });
            };
            const showOFwd = () => { hideAllO(); oPairs[oIdx].fwd.classList.add('org-active'); };
            const showORev = () => { hideAllO(); oPairs[oIdx].rev.classList.add('org-active'); };
            showOFwd();

            oPairs.forEach(p => {
                p.fwd.addEventListener('ended', () => { oPlaying = false; oState = 'ended-fwd'; });
                p.rev.addEventListener('ended', () => {
                    oPlaying = false; oState = 'ended-rev';
                    showOFwd(); oPairs[oIdx].fwd.currentTime = 0;
                });
            });

            const triggerO = () => {
                if (oPlaying) return;
                if (oState === 'ended-fwd') {
                    oPlaying = true; showORev();
                    oPairs[oIdx].rev.currentTime = 0;
                    oPairs[oIdx].rev.play().catch(() => { oPlaying = false; });
                    oState = 'playing-rev';
                } else if (oState === 'ended-rev' || oState === 'idle') {
                    oPlaying = true; showOFwd();
                    oPairs[oIdx].fwd.currentTime = 0;
                    oPairs[oIdx].fwd.play().catch(() => { oPlaying = false; });
                    oState = 'playing-fwd';
                }
            };

            const oWrapper = document.querySelector('.orgasmic-video-wrapper');
            
            var isMobileO = window.matchMedia('(max-width: 900px)').matches || 'ontouchstart' in window;
            if (isMobileO) {
                oWrapper.addEventListener('touchstart', triggerO);
            } else {
                let oMouseOver = false;
                oWrapper.addEventListener('mouseenter', () => { oMouseOver = true; triggerO(); });
                oWrapper.addEventListener('mouseleave', () => { oMouseOver = false; });
                oWrapper.addEventListener('click', triggerO);
                oWrapper.addEventListener('mousemove', () => { if (oMouseOver && !oPlaying) triggerO(); });
            }

            const oObs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting && !oStarted) {
                        oStarted = true; oPlaying = true; oState = 'playing-fwd';
                        oPairs.forEach(p => {
                            p.fwd.preload = 'auto'; p.fwd.load();
                            p.rev.preload = 'auto'; p.rev.load();
                        });
                        oPairs[oIdx].fwd.play().catch(() => { oPlaying = false; });
                    }
                    if (!e.isIntersecting) {
                        // Pause and hide all orgasmic videos when off-screen
                        oPairs.forEach(p => {
                            p.fwd.pause(); p.rev.pause();
                        });
                        oPlaying = false;
                        oState = 'idle';
                        oStarted = false;
                    }
                });
            }, { threshold: 0.3 });
            oObs.observe(oWrapper);

            const oSwapObs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (!e.isIntersecting && oPairs.length > 1) {
                        let next;
                        do { next = Math.floor(Math.random() * oPairs.length); } while (next === oIdx);
                        oIdx = next;
                        showOFwd();
                    }
                });
            }, { threshold: 0 });
            oSwapObs.observe(oWrapper);
        })();

        // ─── ABOUT VIDEO: pool with forward/reverse, swap when off-screen ───
        (() => {
            const aboutWrapper = document.querySelector('.about-video');
            const aboutFwd = document.getElementById('aboutFwd');
            const aboutRev = document.getElementById('aboutRev');
            if (!aboutFwd || !aboutRev) return;

            var mobilePrefix = (window.innerWidth <= 900) ? 'mobile/' : '';
            const aboutPool = [
                { fwd: mobilePrefix + 'about-video.mp4', rev: mobilePrefix + 'about-video-reverse.mp4' },
                { fwd: mobilePrefix + 'about-video-2.mp4', rev: mobilePrefix + 'about-video-2-reverse.mp4' },
            ];

            let aboutIdx = Math.floor(Math.random() * aboutPool.length);
            let aboutPlaying = false;
            let aboutPlayingFwd = true;
            let aboutStarted = false;

            const loadAboutPair = (idx) => {
                aboutFwd.src = aboutPool[idx].fwd;
                aboutRev.src = aboutPool[idx].rev;
                aboutFwd.load();
                aboutRev.load();
                aboutPlayingFwd = true;
                aboutFwd.style.display = 'block';
                aboutRev.style.display = 'none';
            };

            const aboutSwap = (toVideo, fromVideo) => {
                toVideo.currentTime = 0;
                toVideo.style.display = 'block';
                fromVideo.style.display = 'none';
                toVideo.play().catch(() => {});
            };

            loadAboutPair(aboutIdx);

            const triggerAbout = () => {
                if (aboutPlaying) return;
                aboutPlaying = true;
                if (aboutPlayingFwd) {
                    aboutSwap(aboutRev, aboutFwd);
                    aboutPlayingFwd = false;
                } else {
                    aboutSwap(aboutFwd, aboutRev);
                    aboutPlayingFwd = true;
                }
            };

            aboutFwd.addEventListener('ended', () => { aboutPlaying = false; aboutPlayingFwd = true; });
            aboutRev.addEventListener('ended', () => { aboutPlaying = false; aboutPlayingFwd = false; });

            aboutFwd.addEventListener('touchstart', triggerAbout);
            aboutRev.addEventListener('touchstart', triggerAbout);
            aboutFwd.addEventListener('mouseenter', triggerAbout);
            aboutRev.addEventListener('mouseenter', triggerAbout);
            aboutFwd.addEventListener('click', triggerAbout);
            aboutRev.addEventListener('click', triggerAbout);

            let aboutMouseOver = false;
            aboutWrapper.addEventListener('mouseenter', () => { aboutMouseOver = true; });
            aboutWrapper.addEventListener('mouseleave', () => { aboutMouseOver = false; });
            aboutWrapper.addEventListener('mousemove', () => {
                if (aboutMouseOver && !aboutPlaying) triggerAbout();
            });

            // Auto-play when scrolled into view
            const aboutPlayObserver = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting && !aboutStarted) {
                        aboutStarted = true;
                        aboutPlaying = true;
                        aboutFwd.play().catch(() => {});
                    }
                });
            }, { threshold: 0.3 });
            aboutPlayObserver.observe(aboutWrapper);

            // Swap pool when completely off-screen
            const aboutSwapObserver = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (!e.isIntersecting && aboutPool.length > 1) {
                        let next;
                        do { next = Math.floor(Math.random() * aboutPool.length); } while (next === aboutIdx);
                        aboutIdx = next;
                        loadAboutPair(aboutIdx);
                        aboutPlaying = false;
                        aboutStarted = false;
                    }
                });
            }, { threshold: 0 });
            aboutSwapObserver.observe(aboutWrapper);
        })();

        // ─── DIANA VIDEO: auto forward then immediately reverse, loop on interaction ───
        (() => {
            const dFwd = document.getElementById('diana0fwd');
            const dRev = document.getElementById('diana0rev');
            if (!dFwd || !dRev) return;

            let dPlaying = false;
            let dStarted = false;

            // Forward ends → immediately play reverse
            dFwd.addEventListener('ended', () => {
                dRev.style.display = 'block'; dFwd.style.display = 'none';
                dRev.currentTime = 0;
                dRev.play().catch(() => { dPlaying = false; });
            });

            // Reverse ends → back to forward frame, ready for next trigger
            dRev.addEventListener('ended', () => {
                dPlaying = false;
                dFwd.style.display = 'block'; dRev.style.display = 'none';
                dFwd.currentTime = 0;
            });

            const triggerD = () => {
                if (dPlaying) return;
                dPlaying = true;
                dFwd.style.display = 'block'; dRev.style.display = 'none';
                dFwd.currentTime = 0;
                dFwd.play().catch(() => { dPlaying = false; });
            };

            const dWrapper = dFwd.closest('.diana-video-wrapper');
            [dFwd, dRev].forEach(v => {
                v.addEventListener('click', triggerD);
                v.addEventListener('mouseenter', triggerD);
                v.addEventListener('touchstart', triggerD);
            });
            let dMouse = false;
            dWrapper.addEventListener('mouseenter', () => { dMouse = true; });
            dWrapper.addEventListener('mouseleave', () => { dMouse = false; });
            dWrapper.addEventListener('mousemove', () => { if (dMouse && !dPlaying) triggerD(); });

            const dObs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting && !dStarted) {
                        dStarted = true;
                        triggerD();
                    }
                });
            }, { threshold: 0.3 });
            dObs.observe(dWrapper);
        })();
    </script>

    <!-- FAQ Accordion -->
    <script>
    document.querySelectorAll('.faq-question').forEach(function(btn) {
        btn.addEventListener('click', function() {
            var answer = this.nextElementSibling;
            var isOpen = this.classList.contains('faq-open');
            // Close all
            document.querySelectorAll('.faq-question').forEach(function(b) { b.classList.remove('faq-open'); });
            document.querySelectorAll('.faq-answer').forEach(function(a) { a.classList.remove('faq-show'); });
            // Toggle clicked
            if (!isOpen) {
                this.classList.add('faq-open');
                answer.classList.add('faq-show');
            }
        });
    });
    </script>

    <!-- Testimonial Carousel -->
    <script>
    (function() {
        var track = document.getElementById('testimonialTrack');
        var cards = track.querySelectorAll('.testimonial-card');
        var total = cards.length;
        var current = 0;
        var autoTimer = null;
        var paused = false;

        // Measure tallest card and lock height to prevent jumping
        function setTrackHeight() {
            var maxH = 0;
            cards.forEach(function(c) {
                c.style.position = 'relative';
                c.style.opacity = '1';
                var h = c.offsetHeight;
                if (h > maxH) maxH = h;
                c.style.position = '';
                c.style.opacity = '';
            });
            track.style.minHeight = maxH + 'px';
        }
        setTrackHeight();
        window.addEventListener('resize', setTrackHeight);

        // Show first card
        cards[0].classList.add('active-testimonial');

        function goTo(idx) {
            cards[current].classList.remove('active-testimonial');
            current = ((idx % total) + total) % total;
            cards[current].classList.add('active-testimonial');
        }

        // Click to pause/resume
        track.style.cursor = 'pointer';
        track.addEventListener('click', function() {
            paused = !paused;
            if (paused) {
                clearInterval(autoTimer);
                autoTimer = null;
            } else {
                resetAuto();
            }
        });

        // Auto-rotate with gentle crossfade every 5 seconds
        function resetAuto() {
            clearInterval(autoTimer);
            autoTimer = setInterval(function() { goTo(current + 1); }, 5000);
        }

        resetAuto();
    })();
    </script>

    <!-- Mobile Video Optimization -->
    <script>
    (function() {
        // Only swap to mobile videos on smaller screens
        if (window.innerWidth <= 900) {
            // Find all video elements with .mp4 src
            document.querySelectorAll('video[src]').forEach(function(video) {
                var src = video.getAttribute('src');
                if (src && src.endsWith('.mp4') && !src.startsWith('mobile/')) {
                    video.setAttribute('src', 'mobile/' + src);
                }
            });
        }
    })();
    </script>


</body>
</html>
